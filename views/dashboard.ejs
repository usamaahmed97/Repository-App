<% if(typeof(firstName) !== 'undefined') {%> 
<%- include("secondHeader", {firstName, id}); -%>
<h1 class="display-4 fw-bold lh-1 mb-3" style="margin-top: 20px;">Dashboard</h1>
<div style="display: flex; justify-content: space-between; align-items: center;">
  <h3>Welcome back,  <%= firstName %>!</h3>
  <form action="/deleteUser" method="delete" style="display: flex; justify-content: space-between; align-items: center;"> 
   
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#exampleModalCenter">
    Delete User
    </button>
    
  </form>
  
</div>
<% }else{ %>
  <h3>Welcome </h3>
  <% }%>



<!-- Modal -->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Are you sure you want to delete your account?</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        If you click delete, your account will be permanantly deleted. 
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <a href="/deleteUser" class="btn btn-danger my-2">Confirm Delete</a>
      </div>
    </div>
  </div>
</div>

  
<section style="margin-top: 20px;">
    <div class="table-responsive">
        <table class="table table-striped table-sm">
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col">Name</th>
              <th scope="col">Description</th>
              <th scope="col">Owner ID</th>
                
            </tr>
          </thead>
          <tbody>   
    
            <% let i=0; while(i !=allRepositories.length){ %>
              
            <tr>
              <td><%= allRepositories[i].id %></td>
              <td><%=  allRepositories[i].repositoryName %></td>
              <td><%= allRepositories[i].repositoryDescription%></td>
              <td><%= allRepositories[i].userId%></td>
            </tr>
         
            <% i++ } %>
          </tbody>
        </table>   
  </section>

  <div class="col-lg-12 col-md-8 mx-auto">
    <p>
        <div class="b-example-divider"></div>
       
        
        <a href="/createRepository" class="btn btn-primary my-2 btn-dark">Create Repository</a>
        <a href="/yourRepositories" class="btn btn-primary my-2"  style="background-color: #363062; color:#ffffff; border: none;">Your Repositories</a>
    </p>
  </div>
<%- include("footer") -%>

